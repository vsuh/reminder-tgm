# Документация API

Это API позволяет управлять расписаниями и чатами для Telegram Cron Reminder.

## Точки доступа (Endpoints)

### Получение расписаний

* **URL:** `/schedules`
* **Метод:** `GET`
* **Описание:** Возвращает список всех расписаний.
* **Ответ:**

```json
[
  {
    "id": 1,
    "cron": "* * * * *",
    "message": "Тестовое сообщение",
    "modifier": "d/1",
    "last_fired": "2025-04-28T12:00:00",
    "chat_id": 1,
    "chat_name": "Мой чат"
  }
]

```

### Создание расписания

* URL: `/schedules`
* Метод: `POST`
* Описание: Создает новое расписание.
* Тело запроса:

```json
{
  "cron": "* * * * *",
  "message": "Тестовое сообщение",
  "modifier": "d/1",
  "chat_id": 1
}
```

- Ответ:

```json
{
  "status": "success"
}
```

### Создание нескольких расписаний

* URL: `/schedules_all`
* Метод: `POST`
* Описание: Создает несколько расписаний из JSON списка.
* Тело запроса:

```json
[
  {
    "cron": "* * * * *",
    "message": "Тестовое сообщение 1",
    "modifier": "d/1",
    "chat_id": 1
  },
  {
    "cron": "0 0 * * *",
    "message": "Тестовое сообщение 2",
    "modifier": "w/2",
    "chat_id": 2
  }
]
```

- Ответ:

```json
{
  "status": "success"
}
```

### Удаление расписания

* URL: `/schedules/{schedule_id}`
* Метод: `DELETE`
* Описание: Удаляет расписание.
* Ответ:

```json
{
  "status": "deleted"
}
```

### Удаление расписания post

* URL: `/schedules/{schedule_id}/delete`
* Метод: `POST`
* Описание: Удаляет расписание (используя POST запрос).
* Ответ: Перенаправление на /.

### Управление чатами

* URL: `/chats`
* Метод: `GET`
* Описание: Отображает страницу для управления чатами Telegram. Здесь можно добавлять, просматривать и изменять настройки чатов. Эта страница доступна через веб-интерфейс.


* URL: `/chats`
* Метод: `POST`

Описание: Добавляет новый чат.

Тело запроса (form-data):

* `name`: Название чата.
* `chat_id`: ID чата Telegram.

Ответ: Перенаправление на /chats.

### Экспорт расписаний

* URL: `/export`
* Метод: `GET`
* Описание: Экспортирует все расписания в формате JSON.
* Ответ: Загрузка JSON файла.

### Сброс базы данных

* URL: `/drop_db`
* Метод: `GET`
* Описание: Пересоздает базу данных. Внимание: Это удалит все существующие расписания и информацию о получателях уведомлений.
* Ответ: Перенаправление на /
  